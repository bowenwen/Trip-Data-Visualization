shiny::runApp()
runApp()
runApp()
runApp()
library(shiny)
library(shinydashboard)
library(plyr)
library(tidyverse)
library(plotly)
library(leaflet)
library(data.table)
library(DT)
library(googleway)
library(RColorBrewer)
#global variables ####
#google maps basemap tiles
map_url_google <-"https://mts1.google.com/vt/lyrs=m&hl=en&src=app&x={x}&y={y}&z={z}&s=G"
#map zoom level
zoom_level <- 11
#google api key for googleway
my_key <- readLines('api_key.txt')
#link to source code
githubrepo <- "https://github.com/moh-salah/Trip-Data-Visualization"
#data file name
data_file <- "real_data.txt" # "fake_data.txt" #
#read data
df <- fread(data_file,na.strings=c("","NA"))
#define a household person id for each unique person
df$hhprs_ID <- paste(df$household_id, df$person_id, sep="-")
#count number of days for each person
df <- ddply(df,.(hhprs_ID),transform, days = length(unique(day_number)))
#define mode for googleway input
df$g_mode <-
ifelse(
df$mode %in% c("Walk", 'Walking', 'On foot'),
'walking',
ifelse(
df$mode %in% c(
"Other bus",
"SkyTrain",
"SeaBus",
"Westcoast Express",
"Handydart",
"Transit bus",
"School bus",
'Bus',
'Train',
'Transit'
),
'transit',
ifelse(
df$mode %in% c('Bike', 'Biking', 'Bicycling', "Bicycle"),
'bicycling',
'driving'
)
)
)
#define list of person ids and the number of travel days
#this is used later to define the conditional selection of days
pers_days <- unique(df[c("hhprs_ID", "days")])
maxdays <- reactive({
pers_days$days[pers_days$hhprs_ID==input$hhprs_ID]
})
maxdays <- pers_days$days[pers_days$hhprs_ID==input$hhprs_ID]
maxdays <- pers_days$days[pers_days$hhprs_ID]
rm(maxdays)
runApp()
runApp()
View(polylines)
View(polylines)
runApp()
runApp()
View(directions)
View(points)
runApp()
View(directions)
tmp<-df_sub()[x,c('start_lat','start_lon')]
View(tmp)
View(tmp)
tmp<-df_sub()
View(tmp)
runApp()
runApp()
View(directions)
View(points)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
str(1)
a<-str(1)
warning(
paste0(
"Row ",
1,
" had no google direction result, using straight line distance instead."
)
)
warning(
paste0(
"Row ",
str(1),
" had no google direction result, using straight line distance instead."
)
)
a<-str(1)
str(!)
print(1)
print(1)
runApp()
runApp()
runApp()
